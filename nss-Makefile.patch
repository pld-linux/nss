diff -Nur nss-3.3.1/mozilla/security/nss/cmd/platlibs.mk nss-3.3.1/mozilla/security/nss/cmd/platlibs.mk
--- nss-3.3.1/mozilla/security/nss/cmd/platlibs.mk	Wed Jan 31 22:29:29 2001
+++ nss-3.3.1/mozilla/security/nss/cmd/platlibs.mk.new	Wed Dec 19 01:14:17 2001
@@ -79,21 +79,21 @@
 else
 
 # $(PROGRAM) has explicit dependencies on $(EXTRA_LIBS)
-CRYPTOLIB=$(DIST)/lib/libfreebl.$(LIB_SUFFIX)
+CRYPTOLIB=$(DIST)/lib/libfreebl_3.$(LIB_SUFFIX)
 ifdef MOZILLA_SECURITY_BUILD
 	CRYPTOLIB=$(DIST)/lib/libcrypto.$(LIB_SUFFIX)
 endif
 ifdef MOZILLA_BSAFE_BUILD
 	CRYPTOLIB+=$(DIST)/lib/libbsafe.$(LIB_SUFFIX)
-	CRYPTOLIB+=$(DIST)/lib/libfreebl.$(LIB_SUFFIX)
+	CRYPTOLIB+=$(DIST)/lib/libfreebl_03.$(LIB_SUFFIX)
 endif
 EXTRA_LIBS += \
-	$(DIST)/lib/libsmime.$(LIB_SUFFIX) \
-	$(DIST)/lib/libssl.$(LIB_SUFFIX) \
+	$(DIST)/lib/libsmime3.$(LIB_SUFFIX) \
+	$(DIST)/lib/libssl3.$(LIB_SUFFIX) \
 	$(DIST)/lib/libjar.$(LIB_SUFFIX) \
 	$(DIST)/lib/libzlib.$(LIB_SUFFIX) \
-	$(DIST)/lib/libnss.$(LIB_SUFFIX) \
-	$(DIST)/lib/libssl.$(LIB_SUFFIX) \
+	$(DIST)/lib/libnss3.$(LIB_SUFFIX) \
+	$(DIST)/lib/libssl3.$(LIB_SUFFIX) \
 	$(DIST)/lib/libsectool.$(LIB_SUFFIX) \
 	$(DIST)/lib/libpkcs12.$(LIB_SUFFIX) \
 	$(DIST)/lib/libpkcs7.$(LIB_SUFFIX) \
diff -Nur nss-3.3.1/mozilla/security/nss/lib/fortcrypt/swfort/pkcs11/Makefile nss-3.3.1/mozilla/security/nss/lib/fortcrypt/swfort/pkcs11/Makefile
--- nss-3.3.1/mozilla/security/nss/lib/fortcrypt/swfort/pkcs11/Makefile	Wed Dec 19 00:32:07 2001
+++ nss-3.3.1/mozilla/security/nss/lib/fortcrypt/swfort/pkcs11/Makefile.new	Wed Dec 19 00:32:52 2001
@@ -69,14 +69,14 @@
 #	$(DIST)/lib/libdbm.a 
 #	$(DIST)/lib/libnspr3.a 
 #
-CRYPTO_LIB = $(DIST)/lib/libfreebl.$(LIB_SUFFIX) 
+CRYPTO_LIB = $(DIST)/lib/libfreebl_3.$(LIB_SUFFIX) 
 
 ifdef MOZILLA_SECURITY_BUILD
 CRYPTO_LIB = $(DIST)/lib/libcrypto.$(LIB_SUFFIX)
 endif
 ifdef MOZILLA_BSAFE_BUILD
 CRYPTO_LIB += $(DIST)/lib/libbsafe.$(LIB_SUFFIX)
-CRYPTO_LIB += $(DIST)/lib/libfreebl.$(LIB_SUFFIX)
+CRYPTO_LIB += $(DIST)/lib/libfreebl_3.$(LIB_SUFFIX)
 endif
 
 ifeq ($(OS_ARCH), OS2)
diff -Nur nss-3.3.1/mozilla/security/coreconf/ruleset.mk nss-3.3.1/mozilla/security/coreconf/ruleset.mk
--- nss-3.3.1/mozilla/security/coreconf/ruleset.mk	Sat Jun  2 08:03:14 2001
+++ nss-3.3.1/mozilla/security/coreconf/ruleset.mk.new	Wed Dec 19 00:00:36 2001
@@ -156,7 +156,7 @@
 			SHARED_LIBRARY = $(OBJDIR)/$(LIBRARY_NAME)$(LIBRARY_VERSION)$(JDK_DEBUG_SUFFIX).dll
 			IMPORT_LIBRARY = $(OBJDIR)/$(LIBRARY_NAME)$(LIBRARY_VERSION)$(JDK_DEBUG_SUFFIX).lib
 		else
-			LIBRARY = $(OBJDIR)/lib$(LIBRARY_NAME).$(LIB_SUFFIX)
+			LIBRARY = $(OBJDIR)/lib$(LIBRARY_NAME)$(LIBRARY_VERSION).$(LIB_SUFFIX)
 			ifeq ($(OS_ARCH)$(OS_RELEASE), AIX4.1)
 				SHARED_LIBRARY = $(OBJDIR)/lib$(LIBRARY_NAME)$(LIBRARY_VERSION)_shr$(JDK_DEBUG_SUFFIX).a
 			else
diff -Nur nss-3.3.1/mozilla/security/coreconf/Linux.mk nss-3.3.1.new/mozilla/security/coreconf/Linux.mk
--- nss-3.3.1/mozilla/security/coreconf/Linux.mk	Thu Dec 13 13:47:56 2001
+++ nss-3.3.1.new/mozilla/security/coreconf/Linux.mk	Thu Dec 13 14:16:18 2001
@@ -106,5 +106,5 @@
 DSO_LDOPTS		= -shared
 DSO_LDFLAGS		=
 
-# INCLUDES += -I/usr/include -Y/usr/include/linux
 G++INCLUDES		= -I/usr/include/g++
+INCLUDES += -I/usr/include/nspr
diff -Nur nss-3.3.1/mozilla/security/nss/cmd/modutil/manifest.mn nss-3.3.1.new/mozilla/security/nss/cmd/modutil/manifest.mn
--- nss-3.3.1/mozilla/security/nss/cmd/modutil/manifest.mn	Thu Dec 13 13:47:50 2001
+++ nss-3.3.1.new/mozilla/security/nss/cmd/modutil/manifest.mn	Thu Dec 13 14:16:18 2001
@@ -54,6 +54,6 @@
 
 DEFINES = -DNSPR20
 
-INCLUDES =
+INCLUDES = -I$(CORE_DEPTH)/nss/lib/nss
 
 USE_STATIC_LIBS = 1
diff -Nur nss-3.3.1/mozilla/security/nss/lib/ckfw/builtins/Makefile nss-3.3.1.new/mozilla/security/nss/lib/ckfw/builtins/Makefile
--- nss-3.3.1/mozilla/security/nss/lib/ckfw/builtins/Makefile	Thu Dec 13 13:47:51 2001
+++ nss-3.3.1.new/mozilla/security/nss/lib/ckfw/builtins/Makefile	Thu Dec 13 14:16:18 2001
@@ -60,8 +60,8 @@
 EXTRA_LIBS += \
         $(DIST)/lib/libnssckfw.$(LIB_SUFFIX) \
         $(DIST)/lib/libnssb.$(LIB_SUFFIX) \
-	$(PLC_STATIC_LIB) \
-	$(PLDS_STATIC_LIB) \
+	-lplc4 \
+	-lplds4 \
 	$(NULL)
 
 endif
diff -Nur nss-3.3.1/mozilla/security/nss/lib/fortcrypt/swfort/pkcs11/Makefile nss-3.3.1.new/mozilla/security/nss/lib/fortcrypt/swfort/pkcs11/Makefile
--- nss-3.3.1/mozilla/security/nss/lib/fortcrypt/swfort/pkcs11/Makefile	Thu Dec 13 13:47:55 2001
+++ nss-3.3.1.new/mozilla/security/nss/lib/fortcrypt/swfort/pkcs11/Makefile	Thu Dec 13 14:16:18 2001
@@ -92,8 +92,8 @@
 	$(DIST)/lib/libsoftoken.$(LIB_SUFFIX) \
 	$(CRYPTO_LIB) \
 	$(DIST)/lib/libsecutil.$(LIB_SUFFIX) \
-	$(PLC_STATIC_LIB) \
-	$(PLDS_STATIC_LIB) \
+	-lplc4 \
+	-lplds4 \
 	$(NULL)
 
 endif
diff -Nur nss-3.3.1/mozilla/security/nss/lib/smime/manifest.mn nss-3.3.1.new/mozilla/security/nss/lib/smime/manifest.mn
--- nss-3.3.1/mozilla/security/nss/lib/smime/manifest.mn	Thu Dec 13 13:47:54 2001
+++ nss-3.3.1.new/mozilla/security/nss/lib/smime/manifest.mn	Thu Dec 13 14:17:55 2001
@@ -70,6 +70,8 @@
 	smimever.c \
 	$(NULL)
 
+INCLUDES = -I$(CORE_DEPTH)/nss/lib/nss
+
 REQUIRES = security dbm
 
 LIBRARY_NAME = smime
diff -Nur nss-3.3.1/mozilla/security/nss/lib/ssl/manifest.mn nss-3.3.1.new/mozilla/security/nss/lib/ssl/manifest.mn
--- nss-3.3.1/mozilla/security/nss/lib/ssl/manifest.mn	Thu Dec 13 13:47:51 2001
+++ nss-3.3.1.new/mozilla/security/nss/lib/ssl/manifest.mn	Thu Dec 13 14:18:41 2001
@@ -72,6 +72,8 @@
 	nsskea.c \
 	$(NULL)
 
+INCLUDES = -I$(CORE_DEPTH)/nss/lib/nss
+
 REQUIRES = security dbm
 
 LIBRARY_NAME = ssl
